/*
jQWidgets v2.0.0 (2012-April-06)
Copyright (c) 2011-2012 jQWidgets.
License: http://jqwidgets.com/license/
*/

(function(a){a.jqx.jqxWidget("jqxChart","",{});a.extend(a.jqx._jqxChart.prototype,{createInstance:function(c){if(!a.jqx.dataAdapter){throw"jqxdata.js is not loaded";return}this._refreshOnDownloadComlete();this._internalRefresh();var b=this;this.host.bind("mousemove",function(e){if(this.enabled==false){return}e.preventDefault();var d=e.pageX||e.clientX||e.screenX;var g=e.pageY||e.clientY||e.screenY;var f=b.host.position();d-=f.left;g-=f.top;b.onmousemove(d,g)})},_refreshOnDownloadComlete:function(){if(this.source instanceof a.jqx.dataAdapter){var c=this;var d=this.source._options;if(d==undefined||(d!=undefined&&!d.autoBind)){this.source.autoSync=false;this.source.dataBind()}if(this.source.records.length==0){var b=function(){if(c.ready){c.ready()}c.refresh()};this.source.unbindDownloadComplete(this.element.id);this.source.bindDownloadComplete(this.element.id,b)}else{if(c.ready){c.ready()}}this.source.unbindBindingUpdate(this.element.id);this.source.bindBindingUpdate(this.element.id,function(){c.refresh()})}},defineInstance:function(){this.source=new Array();this.seriesGroups=new Array();this.categoryAxis={}},propertyChangedHandler:function(b,c,e,d){if(this.isInitialized==undefined||this.isInitialized==false){return}if(c=="source"){this._refreshOnDownloadComlete()}this.refresh()},_internalRefresh:function(){this.host.empty();this._renderData=new Array();var c=null;if(document.createElementNS){c=new a.jqx.svgRenderer()}else{c=new a.jqx.vmlRenderer();this._isVML=true}if(!c.init(this.host)){return}this.renderer=c;var b=this.renderer.getRect();this._render({x:1,y:1,width:b.width,height:b.height})},refresh:function(){this._internalRefresh()},_seriesTypes:["line","stackedline","stackedline100","spline","stackedspline","stackedspline100","stepline","stackedstepline","stackedstepline100","area","stackedarea","stackedarea100","splinearea","stackedsplinearea","stackedsplinearea100","steparea","stackedsteparea","stackedsteparea100","column","stackedcolumn","stackedcolumn100","pie","scatter","bubble"],_render:function(e){this.renderer.clear();if(this._getDataLen()==0){return}this._buildStats();var v=this.padding||{left:5,top:5,right:5,bottom:5};var m=this.renderer.rect(e.x,e.y,e.width-1,e.height-1);this.renderer.setAttr(m,"fill",this.background||"white");this.renderer.setAttrs(m,{"stroke-width":1,stroke:this.borderColor||"#888888"});var J={x:v.left,y:v.top,width:e.width-v.left-v.right,height:e.height-v.top-v.bottom};var b=this.titlePadding||{left:2,top:2,right:2,bottom:2};if(this.title&&this.title.length>0){var K=this.toThemeProperty("jqx-chart-title-text",null);var z=this.renderer.measureText(this.title,0,{"class":K});this.renderer.text(this.title,J.x+b.left,J.y+b.top,J.width-(b.left+b.right),z.height,0,{"class":K},true,"center","center");J.y+=z.height;J.height-=z.height}if(this.description&&this.description.length>0){var k=this.toThemeProperty("jqx-chart-title-description",null);var z=this.renderer.measureText(this.description,0,{"class":k});this.renderer.text(this.description,J.x+b.left,J.y+b.top,J.width-(b.left+b.right),z.height,0,{"class":k},true,"center","center");J.y+=z.height;J.height-=z.height}if(this.title||this.description){J.y+=(b.bottom+b.top);J.height-=(b.bottom+b.top)}var r=J;var j=0;var n=[];for(var E=0;E<this.seriesGroups.length;E++){var C=this.seriesGroups[E].valueAxis;if(!C){if(this.seriesGroups[E].type=="pie"){n.push(0);continue}throw"seriesGroup["+E+"] is missing valueAxis definition"}var t=C.axisSize;if(!t||t=="auto"){t=this._renderValueAxis(E,{x:0,y:r.y,width:r.width,height:r.height},true).width}n.push(t);j+=t;if(E>0&&t>0){j+=5}}var o=this.categoryAxis.axisSize;if(!o||o=="auto"){var u=this._renderCategoryAxis({x:0,y:0,width:10000000,height:0},true);o=u.height}var H=(this.showLegend!=false);var A=!H||this.legendLayout?{width:0,height:0}:this._renderLegend(J,true);if(J.height<o+A.height||J.width<j){return}r.height-=o+A.height;r.x+=j;r.width-=j;if(!this._isPieOnlySeries()){var d=this.categoryAxis.tickMarksColor||"#888888";if(j==0){var q=a.jqx._ptrnd(r.x);var l=this.renderer.line(q,a.jqx._ptrnd(r.y),q,a.jqx._ptrnd(r.y+r.height+5),{stroke:d,"stroke-width":1})}this._renderCategoryAxis({x:r.x,y:r.y+r.height,width:r.width,height:o},false,r)}if(H){var q=r.x+a.jqx._ptrnd((r.width-A.width)/2);var p=r.y+r.height+o;var t=r.width;var F=A.height;if(this.legendLayout){q=this.legendLayout.left||q;p=this.legendLayout.top||p;t=this.legendLayout.width||t;F=this.legendLayout.height||F}if(q+t>r.width){t=r.width-q}if(p+F>r.height){F=r.height-p}this._renderLegend({x:q,y:p,width:t,height:F})}if(!this._isPieOnlySeries()){var M=r.x-j;for(var E=0;E<this.seriesGroups.length;E++){var t=n[E];this._renderValueAxis(E,{x:M,y:r.y,width:t,height:r.height},false);this._renderHorizontalGridLines(E,r);M+=t+5}}if(r.width<=0||r.height<=0){return}this._plotRect={x:r.x,y:r.y,width:r.width,height:r.height};var G=this.renderer.beginGroup();var I=this.renderer.createClipRect({x:r.x,y:r.y,width:r.width,height:r.height});this.renderer.setClip(G,I);for(var E=0;E<this.seriesGroups.length;E++){var L=this.seriesGroups[E];var D=false;for(var s in this._seriesTypes){if(this._seriesTypes[s]==L.type){D=true;break}}if(!D){throw'jqxChart: invalid series type "'+L.type+'"';continue}if(L.type.indexOf("column")!=-1){this._renderColumnSeries(E,r)}else{if(L.type.indexOf("pie")!=-1){this._renderPieSeries(E,r)}else{if(L.type.indexOf("line")!=-1||L.type.indexOf("area")!=-1){this._renderLineSeries(E,r)}else{if(L.type=="scatter"||L.type=="bubble"){this._renderScatterSeries(E,r)}}}}}this.renderer.endGroup();this._plotGroup=this.renderer._activeParent();if(this.enabled==false){var c=this.renderer.rect(e.x,e.y,e.width,e.height);this.renderer.setAttrs(c,{fill:"#777777",opacity:0.5,stroke:"#00FFFFFF"})}if(this._isVML&&a.browser.version==8&&a.browser.msie){var f=document.childNodes[0];if(f&&f.data&&f.data.toString().indexOf("DOCTYPE")!=-1){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");var B=this.host.find(".chartContainer");if(B.length>0){B[0].innerHTML=B[0].innerHTML}}}},_isPieOnlySeries:function(){if(this.seriesGroups.length==0){return false}for(var b=0;b<this.seriesGroups.length;b++){if(this.seriesGroups[b].type!="pie"){return false}}return true},_renderChartLegend:function(v,c,d,e){var n={x:c.x+3,y:c.y+3,width:c.width-6,height:c.height-6};var j={width:n.width,height:0};var h=0,g=0;var f=20;var b=0;var o=10;var u=10;var s=0;for(var q=0;q<v.length;q++){var k=v[q].css;if(!k){k=this.toThemeProperty("jqx-chart-legend-text",null)}var l=v[q].text;var m=this.renderer.measureText(l,0,{"class":k});if(m.height>f){f=m.height}if(m.width>s){s=m.width}if(e){if(q!=0){g+=f}if(g>n.height){g=0;h+=s+u;s=m.width;j.width=h+s}}else{if(h!=0){h+=u}if(h+2*o+m.width>n.width&&m.width<n.width){h=0;g+=f;f=20;b=n.width;j.heigh=g+f}}if(!d){var p=v[q].color;var t=this.renderer.rect(n.x+h,n.y+g+o/2,o,o);this.renderer.setAttrs(t,{fill:p,stroke:p,"stroke-width":1});this.renderer.text(l,n.x+h+1.5*o,n.y+g,m.width,f,0,{"class":k},false,"center","center")}if(e){}else{h+=m.width+2*o;if(b<h){b=h}}}if(d){j.height=a.jqx._ptrnd(g+f);j.width=a.jqx._ptrnd(b);return j}},_renderLegend:function(l,j){var b=[];for(var o=0;o<this.seriesGroups.length;o++){var f=this.seriesGroups[o];for(var m=0;m<f.series.length;m++){var p=f.series[m];if(f.type=="pie"){var k=p.colorScheme||f.colorScheme||this.colorScheme;var c=this._getDataLen(o);for(var e=0;e<c;e++){var h=this._getDataValue(e,p.displayText,o);if(!h){h=this._getFormattedValue(o,m,e)}var d=this._getColor(k,m*c+e);b.push({text:h,css:p.displayTextClass,color:d})}continue}var n=p.displayText||p.dataField||"";var d=this._getSeriesColor(o,m);b.push({text:n,css:p.displayTextClass,color:d})}}return this._renderChartLegend(b,l,j,(this.legendLayout&&this.legendLayout.flow=="vertical"))},_renderCategoryAxis:function(d,f,h){var s={width:0,height:0};var e=this.categoryAxis;if(!e){return s}var v=e.text;var j=e.tickMarksColor||"#888888";if(!f){var o=a.jqx._ptrnd(d.y);var A=this.renderer.line(a.jqx._ptrnd(d.x),o,a.jqx._ptrnd(d.x+d.width+1),o,{stroke:j,"stroke-width":1})}var G=this._getDataLen();var C,E;for(var F=0;F<G;F++){var B=this._getDataValue(F,this.categoryAxis.dataField);if(B<C&&isNaN(C)){C=B}if(B>E&&isNaN(E)){E=B}}var C=this.categoryAxis.minValue!=undefined?this.categoryAxis.minValue:C;var E=this.categoryAxis.maxValue!=undefined?this.categoryAxis.maxValue:E;if(this._isDate(C)){C=C.valueOf()}if(this._isDate(E)){E=E.valueOf()}var z=e.unitInterval;if(!z||z<C||z>E){z=(E-C)/10}if(!z){z=1}C=a.jqx._rnd(C,z,false);E=a.jqx._rnd(E,z,true);var t=e["class"];if(!t){t=this.toThemeProperty("jqx-chart-axis-text",null)}var c=e.dataField;var p=0;var r=(this.categoryAxis.minValue!=undefined||this.categoryAxis.maxValue!=undefined)?(E-C)/z+1:undefined;var g=Math.round(G/z);if(g*z>G){g--}var g=r||g;if(g<1){if(f){return s}return}var l=d.width/g;var I=e.textRotationAngle||0;var B=undefined;this._categoryIntervals=new Array();for(var D=r?C:0;D<=(r?E:g-1);r?D+=z:D++){F=D;if(z>1){F=D*z+z/2}var u=Math.min(G-1,Math.round(F));if(r){B=D}else{B=this._getDataValue(u,this.categoryAxis.dataField)}this._categoryIntervals.push({value:B.valueOf(),xOffset:p});var v=this._formatValue(B,this.categoryAxis.formatSettings,this.categoryAxis.formatFunction);if(v==""){v=r?B.toString():(u).toString()}if(f){var w=this.renderer.measureText(v,I,{"class":t});if(w.height>s.height){s.height=w.height}}else{this.renderer.text(v,d.x+p,d.y+0,l,d.height,I,{"class":t},true);p+=l}}if(f){s.width=a.jqx._rup(s.width);s.height=a.jqx._rup(s.height+5);return s}var m=e.showTickMarks!=false;var b=e.showGridLines!=false;if(!b&&!m){return}var J=e.gridLinesInterval||e.unitInterval;if(J<e.unitInterval){J=z}else{J=z*(J/e.unitInterval)||z}var K=J/z;if(K<1){K=1}var n=e.tickMarksInterval||e.unitInterval;if(n<e.unitInterval){n=z}else{n=z*(n/e.unitInterval)||z}var q=n/z;if(q<1){q=g}var H=e.gridLinesColor||"#888888";var j=e.tickMarksColor||"#888888";for(var F=1;F<=g;F++){var p=undefined;if((F==g||0==(F%K))&&b){p=a.jqx._ptrnd(h.x+F*l);this.renderer.line(p,a.jqx._ptrnd(h.y),p,a.jqx._ptrnd(h.y+h.height),{stroke:H,"stroke-width":1})}if((F==g||0==(F%q))&&m){p=p||a.jqx._ptrnd(h.x+F*l);this.renderer.line(p,d.y,p,d.y+4,{stroke:j,"stroke-width":1})}}},_renderValueAxis:function(j,c,h){var F=this.seriesGroups[j];var d=F.valueAxis;var s={width:0,height:0};if(this._isPieOnlySeries()){if(h){return s}return}var o=this._stats.seriesGroups[j];if(!o||!o.isValid||false==d.displayValueAxis){if(h){return s}return}var k=d.tickMarksColor||"#888888";var e=F.type.indexOf("stacked")!=-1&&F.type.indexOf("100")!=-1;var m=d.showTickMarks;if(m==undefined){m=true}var q=c.x+c.width;q=a.jqx._ptrnd(q);if(m&&!h){this.renderer.line(q,c.y,q,c.y+c.height+5,{stroke:k,"stroke-width":1})}if(d.description){var l=d.descriptionClass;if(!l){l=this.toThemeProperty("jqx-chart-axis-description",null)}var v=this.renderer.measureText(d.description,-90,{"class":l});if(h){s.width+=v.width+5}else{this.renderer.text(d.description,c.x+2,c.y,c.width-5,c.height,-90,{"class":l},true,"left","center");c.x+=v.width+5;c.width-=v.width+5}}var b=d.dataField;var u=o.intervals;var C=o.min;var z=o.mu;var w=c.height/u;var r=d.itemsClass;if(!r){r=this.toThemeProperty("jqx-chart-axis-text",null)}var n=c.y+c.height-w;var E=d.formatSettings;if(e&&!E){E={sufix:"%"}}var f=0;var G=d.textRotationAngle||0;for(var D=0;D<=u;D++){var A=C+D*z;var t=this._formatNumber(A,E);if(h){var v=this.renderer.measureText(t,G,{"class":r});if(f<v.width){f=v.width}}else{var H=this.renderer.text(t,c.x,n+w/2,c.width-4,w,G,{"class":r},false,"center","center")}n-=w}if(h){s.width+=f+5+(m?3:0);s.height=a.jqx._rup(c.height);s.width=a.jqx._rup(s.width);return s}if(m==undefined||m){var B=c.height/o.tickMarksIntervals;n=c.y;while(n<c.y+c.height){var p=a.jqx._ptrnd(n);this.renderer.line(q-3,p,q,p,{stroke:k,"stroke-width":1});n+=B}}},_renderHorizontalGridLines:function(j,i){var c=this.seriesGroups[j].valueAxis;if(!c||c.showGridLines==false){return}var b=c.gridLinesColor||c.tickMarksColor||"#888888";var e=this._stats.seriesGroups[j];if(!e||!e.isValid||false==c.displayValueAxis||false==c.showGridLines){return}var f=e.gridLinesIntervals;var g=i.height/f;var d=i.y;while(d<i.y+i.height-1){var h=a.jqx._ptrnd(d);this.renderer.line(a.jqx._ptrnd(i.x),h,a.jqx._ptrnd(i.x+i.width),h,{stroke:b,"stroke-width":1});d+=g}},_buildStats:function(){var E={seriesGroups:new Array()};this._stats=E;for(var A=0;A<this.seriesGroups.length;A++){var n=this.seriesGroups[A];E.seriesGroups[A]={};var d=E.seriesGroups[A];d.isValid=true;var b=n.valueAxis!=undefined;var o=-1!=n.type.indexOf("stacked");var f=o&&-1!=n.type.indexOf("100");if(f){d.psums=new Array();d.nsums=new Array()}var c=NaN,e=NaN;var C=NaN,F=NaN;var B=n.baselineValue||0;var z=this._getDataLen(A);var l=0;for(var y=0;y<z&&d.isValid;y++){var v=b?n.valueAxis.minValue:0;var x=b?n.valueAxis.maxValue:0;var j=0,k=0;if(typeof(v)!="number"){v=NaN}if(typeof(x)!="number"){x=NaN}for(var t=0;t<n.series.length;t++){var G=this._getDataValueAsNumber(y,n.series[t].dataField,A);if(isNaN(G)){throw"jqxChart: Data source contains invalid value at Index: "+y+", DataField: "+n.series[t].dataField;d.isValid=false;break}if((G>x||isNaN(x))&&((!b||isNaN(n.valueAxis.maxValue))?true:G<=n.valueAxis.maxValue)){x=G}if((G<v||isNaN(v))&&((!b||isNaN(n.valueAxis.minValue))?true:G>=n.valueAxis.minValue)){v=G}if(G>B){j+=G}else{if(G<B){k+=G}}}var r=j-k;if(l<r){l=r}if(f){d.psums[y]=j;d.nsums[y]=k}if(x>e||isNaN(e)){e=x}if(v<c||isNaN(c)){c=v}if(j>C||isNaN(C)){C=j}if(k<F||isNaN(F)){F=k}}if(f){C=C==0?0:Math.max(C,-F);F=F==0?0:Math.min(F,-C)}var u=b?n.valueAxis.unitInterval:0;if(!u){u=o?(C-F)/10:(e-c)/10}var m=b?n.valueAxis.tickMarksInterval||u:0;var D=b?n.valueAxis.gridLinesInterval||u:0;if(c<F){F=c}if(e>C){C=e}var w=a.jqx._rnd(o?F:c,u,false);var q=a.jqx._rnd(o?C:e,u,true);if(f){q=(q>0)?100:0;w=(w<0)?-100:0;u=b?n.valueAxis.unitInterval:10;if(u<=0||u>=100){u=10}if(m<=0||m>=100){m=10}if(D<=0||D>=100){D=10}}if(isNaN(q)||isNaN(w)||isNaN(u)){continue}var h=(q-w)/(u==0?1:u);if(h<1){continue}var p=q-w;d.rmax=o?C:e;d.rmin=o?F:c;d.min=w;d.max=q;d.mu=u;d.maxRange=l;d.intervals=h;d.tickMarksInterval=m;d.tickMarksIntervals=m==0?0:p/m;d.gridLinesInterval=D;d.gridLinesIntervals=D==0?0:p/D;if(p==0){p=1}d.scale=o?(C-F)/p:(e-c)/p}},_getDataLen:function(c){var b=this.source;if(c!=undefined&&c!=-1&&this.seriesGroups[c].source){b=this.seriesGroups[c].source}if(b instanceof a.jqx.dataAdapter){b=b.records}if(b){return b.length}return 0},_getDataValue:function(b,e,d){var c=this.source;if(d!=undefined&&d!=-1){c=this.seriesGroups[d].source||c}if(c instanceof a.jqx.dataAdapter){c=c.records}if(!c||b<0||b>c.length-1){return NaN}return(e&&e!="")?c[b][e]:c[b]},_getDataValueAsNumber:function(b,e,c){var d=this._getDataValue(b,e,c);if(this._isDate(d)){return d.valueOf()}if(typeof(d)!="number"){d=parseFloat(d)}if(typeof(d)!="number"){d=undefined}return d},_renderPieSeries:function(e,b){var k=this._getDataLen(e);var l=this.seriesGroups[e];for(var B=0;B<l.series.length;B++){var v=l.series[B];var q=v.colorScheme||l.colorScheme||this.colorScheme;var m=v.initialAngle||0;var w=m;var f=v.radius||Math.min(b.width,b.height)*0.4;var c=v.centerOffset||0;var G=v.offsetX||b.width/2;var F=v.offsetX||b.height/2;var g=0;var h=0;for(var D=0;D<k;D++){var L=this._getDataValueAsNumber(D,v.dataField,e);if(typeof(L)!="number"){continue}if(L>0){g+=L}else{h+=L}}var u=g-h;if(u==0){u=1}for(var D=0;D<k;D++){var L=this._getDataValueAsNumber(D,v.dataField,e);if(typeof(L)!="number"){continue}var E=Math.round(Math.abs(L)/u*360);if(D+1==k){E=360+m-w}var K=this.renderer.pieslice(b.x+G,b.y+F,f,w,w+E,c);var C=this._getColor(q,B*k+D);this.renderer.setAttrs(K,{fill:C,stroke:C,"stroke-width":1});var I=w,J=w+E;var r=Math.abs(I-J);var A=r>180?1:0;if(r>360){I=0;J=360}var z=I*Math.PI*2/360;var j=J*Math.PI*2/360;var p=r/2+I;var H=p*Math.PI*2/360;var t=this._showLabel(e,B,D,{x:0,y:0,width:0,height:0},"left","top",true);var d=v.labelRadius||f+Math.max(t.width,t.height);d+=c;var o=b.x+G+d*Math.cos(H)-t.width/2;var n=b.y+F-d*Math.sin(H)-t.height/2;this._showLabel(e,B,D,{x:o,y:n,width:t.width,height:t.height},"left","top");this._installHandlers(K,e,B,D);w+=E}}},_renderColumnSeries:function(d,b){var n=this.seriesGroups[d];if(!n.series||n.series.length==0){return}var o=n.type.indexOf("stacked")!=-1;var c=o&&n.type.indexOf("100")!=-1;var m=this._getDataLen(d);var G=n.columnsGapPercent;if(isNaN(G)||G<0||G>100){G=25}var v=n.seriesGapPercent;if(isNaN(v)||v<0||v>100){v=10}var u=this._calcGroupOffsets(d,b);if(!u||u.xoffsets.length==0){return}for(var t=0;t<n.series.length;t++){var w=n.series[t].dataField;var q=this._getColors(d,t,undefined,this._getGroupGradientType(d));for(var z=u.xoffsets.first;z<=u.xoffsets.last;z++){var H=this._getDataValueAsNumber(z,w,d);if(typeof(H)!="number"){continue}var C=u.xoffsets.data[z];var B=C+u.xoffsets.itemWidth;var j=(B-C);var F=(B-C)/(1+G/100);var l=(!o&&n.series.length>1)?(F*v/100)/(n.series.length-1):0;var E=(F-l*(n.series.length-1));var f=0;if(!o&&n.series.length>1){E/=n.series.length;f=t}var r=C+(j-F)/2+f*(l+E);r=a.jqx._ptrnd(r);var p=u.offsets[t][z].to;var g=u.offsets[t][z].from;var e=u.baseOffset;var A=g-p;if(Math.abs(A)<1){continue}var k={x:b.x+r,y:A>0?p:g,width:E,height:Math.abs(A)};var D;if(!o){D=this.renderer.rect(k.x,k.y,k.width,k.height)}else{D=this.renderer.rect(k.x,k.y,E,k.height)}this.renderer.setAttrs(D,{fill:q.fillColor,stroke:q.lineColor,"stroke-width":1});this._installHandlers(D,d,t,z);this._showLabel(d,t,z,k)}}},_renderScatterSeries:function(d,c){var h=this.seriesGroups[d];if(!h.series||h.series.length==0){return}var b=h.type=="bubble";var p=this._calcGroupOffsets(d,c);if(!p||p.xoffsets.length==0){return}for(var q=0;q<h.series.length;q++){var l=this._getColors(d,q,undefined,this._getGroupGradientType(d));var n=h.series[q];var u=n.dataField;var e=n.opacity||h.opacity;if(!e||e<0||e>1){e=1}var t=NaN,v=NaN;if(b){for(var w=p.xoffsets.first;w<=p.xoffsets.last;w++){var D=this._getDataValueAsNumber(w,n.radiusDataField,d);if(typeof(D)!="number"){throw"Invalid radiusDataField value at ["+w+"]"}if(isNaN(t)||D<t){t=D}if(isNaN(v)||D>v){v=D}}}var j=n.minRadius;if(isNaN(j)){j=5}var g=n.maxRadius;if(isNaN(g)){j=30}if(j>g){throw"Invalid settings: minRadius must be less than or equal to maxRadius"}var f=n.radius||5;for(var w=p.xoffsets.first;w<=p.xoffsets.last;w++){var D=this._getDataValueAsNumber(w,u,d);if(typeof(D)!="number"){continue}var A=p.xoffsets.data[w];var z=A+p.xoffsets.itemWidth;var m=A+(z-A)/2;m=a.jqx._ptrnd(c.x+m);var k=p.offsets[q][w].to;var o=f;if(b){var C=this._getDataValueAsNumber(w,n.radiusDataField,d);if(typeof(C)!="number"){continue}o=j+(g-j)*(C-t)/Math.max(1,v-t)}var B=this.renderer.circle(m,k,o);this.renderer.setAttrs(B,{fill:l.fillColor,"fill-opacity":e,stroke:l.lineColor,"stroke-width":1});this._installHandlers(B,d,q,w)}}},_showToolTip:function(n,m,r,o,i){if(this.showToolTips==false){return}this._hideToolTip();if(this._pointMarker){n=parseInt(this.renderer.getAttr(this._pointMarker,"cx"))+5;m=parseInt(this.renderer.getAttr(this._pointMarker,"cy"))-5}var p=this.seriesGroups[r];var j=p.series[o];var b=this._getColors(r,o);var q=this._getFormattedValue(r,o,i);var f=this._getDataValue(i,this.categoryAxis.dataField);var c=!f?i.toString():f.toString();if(p.type!="pie"){q=(j.displayText||j.dataField||"")+", "+c+": "+q}else{q=this._getDataValue(i,j.displayText||j.dataField)+": "+q}var e=j.toolTipClass||p.toolTipClass||this.toThemeProperty("jqx-chart-tooltip-text",null);var d=j.toolTipBackground||p.toolTipBackground||"#FFFFFF";var h=j.toolTipLineColor||p.toolTipLineColor||b.lineColor;var l=this.renderer.measureText(q,0,{"class":e});l.width=l.width+5;l.height=l.height+6;rect=this.renderer.getRect();n=Math.max(n-5,rect.x);m=Math.max(m-l.height,rect.y);if(l.width>rect.width||l.height>rect.height){return}if(n+l.width>rect.x+rect.width){n=rect.x+rect.width-l.width-2}if(m+l.height>rect.y+rect.height){m=rect.y+rect.height-l.height-2}var k=this.renderer.rect(n,m,l.width,l.height);this.renderer.setAttrs(k,{fill:d,"fill-opacity":0.8,stroke:h,rx:2,ry:2,"stroke-width":1});var g=this.renderer.text(q,n,m,l.width,l.height,0,{"class":e},true,"center","center");this._toolTipElement={box:k,txt:g}},_hideToolTip:function(){if(!this._toolTipElement){return}this.renderer.removeElement(this._toolTipElement.box);this.renderer.removeElement(this._toolTipElement.txt);this._toolTipElement=undefined},_showLabel:function(r,n,c,j,f,k,g){var p=this.seriesGroups[r];var b=p.series[n];if(!b.showLabels&&!p.showLabels){return}if(j.width<0||j.height<0){return}var m=b.labelsAngle||p.labelsAngle||0;var o=b.labelOffset||p.labelAngle||{x:0,y:0};var e=b.labelClass||p.labelClass||this.toThemeProperty("jqx-chart-label-text",null);f=f||"center";k=k||"center";var q=this._getFormattedValue(r,n,c);var l=j.width;var d=j.height;if(l==0||d==0||g){var i=this.renderer.measureText(q,m,{"class":e});return i}var s=this.renderer.text(q,j.x+o.x,j.y+o.y,l,d,m,{},m!=0,f,k);this.renderer.setAttrs(s,{"class":e});if(this._isVML){this.renderer.removeElement(s);this.renderer.getContainer()[0].appendChild(s)}},_renderLineSeries:function(d,A){var q=this.seriesGroups[d];if(!q.series||q.series.length==0){return}var j=q.type.indexOf("area")!=-1;var v=q.type.indexOf("stacked")!=-1;var b=v&&q.type.indexOf("100")!=-1;var M=q.type.indexOf("spline")!=-1;var k=q.type.indexOf("step")!=-1;if(k&&M){return}var l=this._getDataLen(d);var K=A.width/l;var o=Math.round(A.width/K);var c=Math.round(l/o);var m=this._calcGroupOffsets(d,A);if(!m||m.xoffsets.length==0){return}var e=false;if(this._isVML&&a.browser.version==8&&a.browser.msie){var t=document.childNodes[0];if(t&&t.data&&t.data.toString().indexOf("DOCTYPE")!=-1){e=true}}for(var F=q.series.length-1;F>=0;F--){var G=this._getColors(d,F,undefined,this._getGroupGradientType(d));if(j&&e){G.fillColor="#"+G.fillColor.substr(4,G.fillColor.length-5);G.fillSelected="#"+G.fillSelected.substr(4,G.fillSelected.length-5)}var N=q.series[F].opacity||q.opacity;if(!N||N<0||N>1){N=1}var r=q.series[F].lineWidth||q.lineWidth;if(!r||r=="auto"||isNaN(r)||r<1||r>15){r=j?2:3}var D="";var z=-1;var h=0;var B=NaN;var n=NaN;var P=NaN;var y=0;if(m.xoffsets.length<1){continue}for(var L=m.xoffsets.first;L<=m.xoffsets.last;L++){var E=m.xoffsets.data[L]+m.xoffsets.itemWidth/2;if(E==undefined){continue}if(D.length!=0){D+=" "}var g=m.offsets[F][L].to;if(!j&&b){if(g<=A.y){g=A.y+1}if(g>=A.y+A.height){g=A.y+A.height-1}}E=Math.max(E,1);h=E;if(k&&!isNaN(B)&&!isNaN(n)){if(n!=g){D+=a.jqx._ptrnd(A.x+h)+","+a.jqx._ptrnd(n)+" "}}D+=a.jqx._ptrnd(A.x+h)+","+a.jqx._ptrnd(g);y++;B=h;n=g;if(isNaN(P)){P=g}this._showLabel(d,F,L,{x:a.jqx._ptrnd(A.x+h),y:a.jqx._ptrnd(g),width:0,height:0})}if(M){D=this._getBezierPoints(D)}var w=D.split(" ");var p=w[0].replace("C","");if(j){var f=m.xoffsets.data[m.xoffsets.first];if(f>0){f+=m.xoffsets.itemWidth/2}var I=m.xoffsets.data[m.xoffsets.last];if(Math.abs(I+m.xoffsets.itemWidth-A.width)<2){I=A.width}else{I+=m.xoffsets.itemWidth/2}f=a.jqx._ptrnd(A.x+f);I=a.jqx._ptrnd(A.x+I);var C=f+","+a.jqx._ptrnd(P);var O=I+","+a.jqx._ptrnd(g);var H=f+","+(m.baseOffset);var u=I+","+(m.baseOffset);D="M "+H+" L "+p+(M?"":("L "+p+" "))+D+(M?(" L"+u+" M "+u):(" "+u+" "+H))}else{if(M){D="M "+p+" "+D}else{D="M "+p+" L "+p+" "+D}}var J=this.renderer.path(D,{"stroke-width":r,stroke:G.lineColor,"fill-opacity":N,fill:j?G.fillColor:"none"});this._installHandlers(J,d,F)}},_getColors:function(n,k,h,e){var l=this.seriesGroups[n];var i=l.series[k].useGradient||l.useGradient;if(i==undefined){i=true}var g;if(!isNaN(h)){var d=this._getDataLen(n);g=this._getColor(l.series[k].colorScheme||l.colorScheme||this.colorScheme,k*d+h)}else{g=this._getSeriesColor(n,k)}var m=a.jqx._adjustColor(g,1.1);var j=a.jqx._adjustColor(g,0.9);var f=a.jqx._adjustColor(m,0.9);var b=g;var c=m;if(i){if(e=="verticalLinearGradient"){b=this.renderer._toLinearGradient(g,true,[[0,1],[100,1.5]]);c=this.renderer._toLinearGradient(m,true,[[0,1],[100,1.5]])}else{if(e=="horizontalLinearGradient"){b=this.renderer._toLinearGradient(g,false,[[0,1],[25,1.1],[50,1.5],[100,1]]);c=this.renderer._toLinearGradient(m,false,[[0,1],[25,1.1],[50,1.5],[100,1]])}}}return{baseColor:g,fillColor:b,lineColor:j,fillSelected:c,lineSelected:f}},_installHandlers:function(d,j,i,c){var b=this;var h=this.seriesGroups[j];var e=this.seriesGroups[j].series[i];var f=h.type.indexOf("line")!=-1||h.type.indexOf("area")!=-1;if(!f){this.renderer.addHandler(d,"mousemove",function(g){g.preventDefault();b._startTooltipTimer(j,i,c)})}this.renderer.addHandler(d,"mouseover",function(g){g.preventDefault();b._select(d,j,i,c);if(f){return}if(isNaN(c)){return}b._raiseEvent("mouseover",h,e,c)});this.renderer.addHandler(d,"mouseout",function(g){g.preventDefault();if(c!=undefined){b._cancelTooltipTimer()}if(f){return}b._unselect();if(isNaN(c)){return}b._raiseEvent("mouseout",h,e,c)});this.renderer.addHandler(d,"click",function(g){g.preventDefault();if(f){return}if(h.type.indexOf("column")!=-1){b._unselect()}if(isNaN(c)){return}b._raiseEvent("click",h,e,c)})},_getHorizontalOffset:function(n,k,g){var j=this._plotRect;var d=this._getDataLen(n);if(d==0){return{index:undefined,x:k}}var m=this._calcGroupOffsets(n,this._plotRect);if(m.xoffsets.length==0){return{index:undefined,x:undefined}}k-=j.x;var h=m.xoffsets.itemWidth/2;var f=m.xoffsets.first;var l=m.xoffsets.last;if(k<=m.xoffsets.data[f]){return{index:f,x:m.xoffsets.data[f]+h}}if(k>=m.xoffsets.data[l]){return{index:l,x:m.xoffsets.data[l]+h}}for(var e=f;e<l;e++){var c=m.xoffsets.data[e];var b=m.xoffsets.data[e+1];if(k>c&&k<c+(b-c)/2){return{index:e,x:c+h}}if(k>c+(b-c)/2&&k<b){return{index:Math.min(e+1,l),x:b+h}}}return{index:undefined,x:undefined}},onmousemove:function(k,h){this._mouseX=k;this._mouseY=h;this._hideToolTip();if(!this._selected){return}var j=this._plotRect;if(k<j.x||k>j.x+j.width||h<j.y||h>j.y+j.height){this._unselect();return}var m=this._selected.group;var e=this.seriesGroups[m];var o=e.series[this._selected.series];var f=this.seriesGroups[m].type;var j=this._plotRect;if(f.indexOf("line")!=-1||f.indexOf("area")!=-1){var c=this._getHorizontalOffset(m,k,h);var d=c.index;if(d==undefined){return}if(this._selected.item!=d){if(this._selected.item){this._raiseEvent("mouseout",e,o,this._selected.item)}this._selected.item=d;this._raiseEvent("mouseover",e,o,d)}var l=this._calcGroupOffsets(m,j);h=l.offsets[this._selected.series][d].to;k=c.x;h=a.jqx._ptrnd(h);k=a.jqx._ptrnd(j.x+k);if(this._isVML){h-=4;k-=4}if(k<j.x||k>j.x+j.width&&this._pointMarker){this.renderer.removeElement(this._pointMarker);this._pointMarker=undefined;return}if(!this._pointMarker){this._pointMarker=this.renderer.circle(k,h,4);this._plotGroup.appendChild(this._pointMarker)}var b=this._getSeriesColor(this._selected.group,this._selected.series);var n=a.jqx._adjustColor(b,0.7);this.renderer.setAttrs(this._pointMarker,{fill:b,stroke:n,opacity:1});this.renderer.setAttrs(this._pointMarker,{cx:k,cy:h});this._startTooltipTimer(m,this._selected.series,d)}},_startTooltipTimer:function(h,f,d){this._cancelTooltipTimer();var b=this;var e=b.seriesGroups[h];var c=this.toolTipDelay;if(isNaN(c)||c>10000||c<0){c=500}this._tttimer=setTimeout(function(){b._showToolTip(b._mouseX,b._mouseY-3,h,f,d);b._tttimer=setTimeout(function(){b._hideToolTip()},4000)},c)},_cancelTooltipTimer:function(){clearTimeout(this._tttimer)},_getGroupGradientType:function(c){var b=this.seriesGroups[c];if(b.type.indexOf("area")!=-1){return"verticalLinearGradient"}else{if(b.type.indexOf("column")!=-1){return"horizontalLinearGradient"}else{if(b.type.indexOf("scatter")!=-1||b.type.indexOf("bubble")!=-1){return"radialGradient"}}}return undefined},_select:function(d,h,f,c){if(this._selected&&this._selected.element!=d){this._unselect()}this._selected={element:d,group:h,series:f,item:c};var e=this.seriesGroups[h];var b=this._getColors(h,f,e.type=="pie"?c:undefined,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1){b.fillSelected="none"}this.renderer.setAttrs(d,{stroke:b.lineSelected,fill:b.fillSelected})},_unselect:function(){if(this._selected){var h=this._selected.group;var f=this._selected.series;var c=this._selected.item;var e=this.seriesGroups[h];var d=e.series[f];var b=this._getColors(h,f,e.type=="pie"?c:undefined,this._getGroupGradientType(h));if(e.type.indexOf("line")!=-1&&e.type.indexOf("area")==-1){b.fillColor="none"}this.renderer.setAttrs(this._selected.element,{stroke:b.lineColor,fill:b.fillColor});if(e.type.indexOf("line")!=-1||e.type.indexOf("area")!=-1&&!isNaN(c)){this._raiseEvent("mouseout",e,d,c)}this._selected=undefined}if(this._pointMarker){this.renderer.removeElement(this._pointMarker);this._pointMarker=undefined}},_raiseEvent:function(e,f,d,b){var c=d[e]||f[e];var g=0;for(;g<this.seriesGroups.length;g++){if(this.seriesGroups[g]==f){break}}if(g==this.seriesGroups.length){return}if(c&&a.isFunction(c)){c({event:e,seriesGroup:f,serie:d,elementIndex:b,elementValue:this._getDataValue(b,d.dataField,g)})}},_calcGroupOffsets:function(f,b){var n=this.seriesGroups[f];if(!n.series||n.series.length==0){return}if(!this._renderData){this._renderData=new Array()}while(this._renderData.length<f+1){this._renderData.push(null)}if(this._renderData[f]!=null){return this._renderData[f]}var z=new Array();var o=n.type.indexOf("stacked")!=-1;var d=o&&n.type.indexOf("100")!=-1;var l=this._getDataLen(f);var B=n.baselineValue||0;var C=this._stats.seriesGroups[f];if(!C||!C.isValid){return}if(B>C.max){B=C.max}if(B<C.min){B=C.min}var u=d?C.maxRange:C.max-C.min;var D=b.height/u;var e=0;if(d){if(C.min*C.max<0){u/=2;e=b.y+b.height-(u+B)*D}else{e=b.y+b.height-B*D}}else{e=b.y+b.height-(B-C.min)*D}var s=new Array();var c=new Array();e=a.jqx._ptrnd(e);var g=(C.min*C.max<0)?b.height/2:b.height;for(var w=0;w<n.series.length;w++){z.push(new Array());for(var x=0;x<l;x++){var E=this._getDataValueAsNumber(x,n.series[w].dataField,f);if(isNaN(E)){continue}if(E>C.rmax){E=C.rmax}if(E<C.rmin){E=C.rmin}var m=(E>B)?s:c;var A=D*(E-B);var r=e;if(o){if(d){var p=(C.psums[x]-C.nsums[x]);if(E>B){A=(C.psums[x]/p)*g;if(C.psums[x]!=0){A*=E/C.psums[x]}}else{A=(C.nsums[x]/p)*g;if(C.nsums[x]!=0){A*=E/C.nsums[x]}}}if(isNaN(m[x])){m[x]=e}r=m[x]}A=a.jqx._ptrnd(Math.abs(A));if(w==n.series.length-1&&d){var q=0;for(var v=0;v<w;v++){q+=Math.abs(z[v][x].to-z[v][x].from)}q+=A;if(q<g){if(A>0.5){A=a.jqx._ptrnd(A+g-q)}else{var v=w-1;while(v>=0){var t=Math.abs(z[v][x].to-z[v][x].from);if(t>1){if(z[v][x].from>z[v][x].to){z[v][x].from+=g-q}break}v--}}}}if(E<B){m[x]+=A;z[w].push({from:r+1,to:r+A})}else{m[x]-=A;z[w].push({from:r,to:r-A})}}}var A=D*Math.max(C.min,B);this._renderData[f]={baseOffset:e,offsets:z};this._renderData[f].xoffsets=this._calculateXOffsets(f,b);return this._renderData[f]},_calculateXOffsets:function(q,l){var c=this._getCategoryAxis(q);var k=new Array();var b=this._getDataLen(q);var e=this._castAsNumber(c.minValue);var m=this._castAsNumber(c.maxValue);if(isNaN(e)||isNaN(m)){for(var f=0;f<b;f++){var o=this._getDataValue(f,c.dataField,q);o=this._castAsNumber(o);if(isNaN(o)){continue}if(o<e||isNaN(e)){e=o}if(o>m||isNaN(m)){m=o}}}var d=(c.maxValue!=undefined)||(c.minValue!=undefined);if(d&&(isNaN(m)||isNaN(e))){d=false;throw"Invalid min/max category values"}if(!d){e=0;m=b}var h=d?m-e+1:m-e;if(h==0){h=1}var j=this._plotRect.width/h;var g=-1,p=-1;for(var f=0;f<b;f++){if(!d){k.push(a.jqx._ptrnd((f-e)/h*l.width));if(g==-1){g=f}if(p==-1||p<f){p=f}continue}var o=this._getDataValue(f,c.dataField,q);o=this._castAsNumber(o);if(isNaN(o)||o<e||o>m){k.push(-1);continue}var n=a.jqx._ptrnd((o-e)/h*this._plotRect.width);k.push(n);if(g==-1){g=f}if(p==-1||p<f){p=f}}return{data:k,first:g,last:p,length:p==-1?0:p-g+1,itemWidth:j}},_getCategoryAxis:function(b){if(b==undefined||this.seriesGroups.length<=b){return this.categoryAxis}return this.seriesGroups[b].categoryAxis||this.categoryAxis},_getSeriesColor:function(l,c){var e=this.seriesGroups[l];var m=e.series[c];if(m.color){return m.color}var k=0;for(var d=0;d<=l;d++){for(var b in this.seriesGroups[d].series){if(d==l&&b==c){break}else{k++}}}var h=this.colorScheme;if(e.colorScheme){h=e.colorScheme;sidex=c}if(h){for(var d=0;d<this.colorSchemes.length;d++){var f=this.colorSchemes[d];if(f.name==h){while(k>f.colors.length){k-=f.colors.length;if(++d>=this.colorSchemes.length){d=0}f=this.colorSchemes[d]}return f.colors[k%f.colors.length]}}}return"#222222"},_getColor:function(c,e){for(var f=0;f<this.colorSchemes.length;f++){if(c==this.colorSchemes[f].name){break}}var d=0;while(d<=e){if(f==this.colorSchemes.length){f=0}var b=this.colorSchemes[f].colors.length;if(d+b<=e){d+=b;f++}else{return this.colorSchemes[f].colors[e-d]}}},colorSchemes:[{name:"scheme01",colors:["#4572A7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#2F2933","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]}],_formatValue:function(c,f,b){if(c==undefined){return""}if(this._isObject(c)&&!b){return""}if(b){if(!a.isFunction(b)){return c.toString()}try{return b(c)}catch(d){return d.message}}if(this._isNumber(c)){return this._formatNumber(c,f)}if(this._isDate(c)){return this._formatDate(c,f)}return c.toString()},_getFormattedValue:function(k,e,b,c,d){var h=this.seriesGroups[k];var m=h.series[e];var l="";var f=c,i=d;if(!i){i=m.formatFunction||h.formatFunction}if(!f){f=m.formatSettings||h.formatSettings}if(!m.formatFunction&&m.formatSettings){i=undefined}var j=this._getDataValue(b,m.dataField,k);if(j){l=this._formatValue(j,f,i)}return l||""},_castAsNumber:function(c){if(c instanceof Date&&!isNaN(c)){return c.valueOf()}if(typeof(c)=="string"){var b=new Date(c);if(b instanceof Date&&!isNaN(b)){c=b.valueOf()}else{c=parseFloat(c)}}return c},_isNumber:function(b){if(typeof(b)=="string"){if(b.indexOf(":")!=-1||b.indexOf("/")!=-1||b.indexOf("-")>0){return false}b=parseFloat(b)}return typeof b==="number"&&isFinite(b)},_isDate:function(b){return b instanceof Date},_isBoolean:function(b){return typeof b==="boolean"},_isObject:function(b){return(b&&(typeof b==="object"||a.isFunction(b)))||false},_formatDate:function(c,b){return c.toString()},_formatNumber:function(n,e){if(!this._isNumber(n)){return n}e=e||{};var q=e.decimalSeparator||".";var o=e.thousandsSeparator||"";var m=e.prefix||"";var p=e.sufix||"";var h=e.decimalPlaces||((n*100!=parseInt(n)*100)?2:0);var l=e.negativeWithBrackets||false;var g=(n<0);if(g&&l){n*=-1}var d=n.toString();var b;var k=Math.pow(10,h);d=(Math.round(n*k)/k).toString();if(isNaN(d)){d=""}b=d.lastIndexOf(".");if(h>0){if(b<0){d+=q;b=d.length-1}else{if(q!=="."){d=d.replace(".",q)}}while((d.length-1-b)<h){d+="0"}}b=d.lastIndexOf(q);b=(b>-1)?b:d.length;var f=d.substring(b);var c=0;for(var j=b;j>0;j--,c++){if((c%3===0)&&(j!==b)&&(!g||(j>1)||(g&&l))){f=o+f}f=d.charAt(j-1)+f}d=f;if(g&&l){d="("+d+")"}return m+d+p},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:false},_getBezierPoints:function(e){var h=[];var f=e.split(" ");for(var d=0;d<f.length;d++){var j=f[d].split(",");h.push({x:parseFloat(j[0]),y:parseFloat(j[1])})}var k="";for(var d=0;d<h.length-1;d++){var b=[];if(0==d){b.push(h[d]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+2])}else{if(h.length-2==d){b.push(h[d-1]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+1])}else{b.push(h[d-1]);b.push(h[d]);b.push(h[d+1]);b.push(h[d+2])}}var c=[];var g=9;c.push({x:b[1].x,y:b[1].y});c.push({x:((-b[0].x+g*b[1].x+b[2].x)/g),y:((-b[0].y+g*b[1].y+b[2].y)/g)});c.push({x:((b[1].x+g*b[2].x-b[3].x)/g),y:((b[1].y+g*b[2].y-b[3].y)/g)});c.push({x:b[2].x,y:b[2].y});k+="C"+a.jqx._ptrnd(c[1].x)+","+a.jqx._ptrnd(c[1].y)+" "+a.jqx._ptrnd(c[2].x)+","+a.jqx._ptrnd(c[2].y)+" "+a.jqx._ptrnd(c[3].x)+","+a.jqx._ptrnd(c[3].y)+" "}return k}});a.jqx._adjustColor=function(d,b){var e=a.jqx.cssToRgb(d);var d="#";for(var f=0;f<3;f++){var g=Math.round(b*e[f]);if(g>255){g=255}else{if(g<=0){g=0}}g=a.jqx.decToHex(g);if(g.toString().length==1){d+="0"}d+=g}return d.toUpperCase()};a.jqx.decToHex=function(b){return b.toString(16)},a.jqx.hexToDec=function(b){return parseInt(b,16)};a.jqx.rgbToHex=function(e,d,c){return[a.jqx.decToHex(e),a.jqx.decToHex(d),a.jqx.decToHex(c)]};a.jqx.hexToRgb=function(c,d,b){return[a.jqx.hexToDec(c),a.jqx.hexToDec(d),a.jqx.hexToDec(b)]};a.jqx.cssToRgb=function(b){if(b.indexOf("rgb")<=-1){return a.jqx.hexToRgb(b.substring(1,3),b.substring(3,5),b.substring(5,7))}return b.substring(4,b.length-1).split(",")};a.jqx._ptrnd=function(c){var b=a.jqx._rnd(c,1,false);if(!document.createElementNS){return b}return b-0.5};a.jqx._rup=function(c){var b=Math.round(c);if(c>b){b++}return b};a.jqx._rnd=function(c,e,d){if(isNaN(c)){return c}var b=c-c%e;if(c==b){return b}if(d){if(c>b){b+=e}}else{if(b>c){b-=e}}return b};a.jqx.svgRenderer=function(){};a.jqx.svgRenderer.prototype={_svgns:"http://www.w3.org/2000/svg",init:function(f){var d="<table id=tblChart cellspacing='0' cellpadding='0' border='0' align='left' valign='top'><tr><td colspan=2 id=tdTop></td></tr><tr><td id=tdLeft></td><td class='chartContainer'></td></tr></table>";f.append(d);this.host=f;var b=f.find(".chartContainer");b[0].style.width=f.width()+"px";b[0].style.height=f.height()+"px";var h;try{var c=document.createElementNS(this._svgns,"svg");c.setAttribute("id","svgChart");c.setAttribute("version","1.1");c.setAttribute("width","100%");c.setAttribute("height","100%");b[0].appendChild(c);this.canvas=c}catch(g){return false}this._id=new Date().getTime();this.clear();this._layout();this._runLayoutFix();return true},_runLayoutFix:function(){var b=this;this._fixLayout()},_fixLayout:function(){var d=a(this.canvas).position();var c=(parseFloat(d.left)==parseInt(d.left));var b=(parseFloat(d.top)==parseInt(d.top));if(!a.browser.msie){if(!c){this.host.find("#tdLeft")[0].style.width=(this.host.find("#tdLeft")[0].style.width=="0.5px")?"0px":"0.5px"}if(!b){this.host.find("#tdTop")[0].style.height=(this.host.find("#tdTop")[0].style.height=="0.5px")?"0px":"0.5px"}}else{}},_layout:function(){var c=a(this.canvas).offset();var b=this.host.find(".chartContainer");this._width=Math.max(a.jqx._rup(this.host.width())-1,0);this._height=Math.max(a.jqx._rup(this.host.height())-1,0);b[0].style.width=this._width;b[0].style.height=this._height;this._fixLayout()},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0){this.canvas.removeChild(this.canvas.firstElementChild)}this._defs=document.createElementNS(this._svgns,"defs");this._gradients={};this.canvas.appendChild(this._defs)},removeElement:function(c){if(c!=undefined){try{this.canvas.removeChild(c)}catch(b){}}},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElementNS(this._svgns,"g");b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0){return}this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(d){var e=document.createElementNS(this._svgns,"clipPath");var b=document.createElementNS(this._svgns,"rect");this.setAttrs(b,{x:d.x,y:d.y,width:d.width,height:d.height});this._clipId=this._clipId||0;e.id="cl"+this._id+"_"+(++this._clipId).toString();e.appendChild(b);this._defs.appendChild(e);return e},setClip:function(c,b){return this.setAttr(c,"clip-path","url(#"+b.id+")")},_clipId:0,addHandler:function(b,d,c){b["on"+d]=c},shape:function(b,e){var c=document.createElementNS(this._svgns,b);if(!c){return undefined}for(var d in e){c.setAttribute(d,e[d])}this._activeParent().appendChild(c);return c},measureText:function(k,c,d){var f=document.createElementNS(this._svgns,"text");this.setAttrs(f,d);f.appendChild(f.ownerDocument.createTextNode(k));var j=this._activeParent();j.appendChild(f);var l=f.getBBox();var g=a.jqx._rup(l.width);var b=a.jqx._rup(l.height);j.removeChild(f);if(c==0){return{width:g,height:b}}var h=c*Math.PI*2/360;var e=Math.abs(g*Math.sin(h)-b*Math.cos(h));var i=Math.abs(g*Math.cos(h)+b*Math.sin(h));return{width:a.jqx._rup(i),height:a.jqx._rup(e)}},text:function(o,l,k,s,q,z,B,A,n,g){var r;if(!n){n="center"}if(!g){g="center"}if(A){r=this.beginGroup();var e=this.createClipRect({x:a.jqx._rup(l),y:a.jqx._rup(k),width:a.jqx._rup(s),height:a.jqx._rup(q)});this.setClip(r,e)}var p=document.createElementNS(this._svgns,"text");this.setAttrs(p,B);p.appendChild(p.ownerDocument.createTextNode(o));var j=this._activeParent();j.appendChild(p);var b=p.getBBox();j.removeChild(p);var C=b.width;var i=b.height*0.6;var m=s||0;var u=q||0;if(!z||z==0){if(n=="center"){l+=(m-C)/2}else{if(n=="right"){l+=(m-C)}}k+=i;if(g=="center"){k+=(u-i)/2}else{if(g=="bottom"){k+=u-i}}if(!s){s=C}if(!q){q=i}this.setAttrs(p,{x:a.jqx._rup(l),y:a.jqx._rup(k),width:a.jqx._rup(s),height:a.jqx._rup(q),cursor:"default"});j.appendChild(p);this.endGroup();return j==this.canvas?p:j}var f=z*Math.PI*2/360;var d=Math.abs(C*Math.sin(f)-i*Math.cos(f));var v=Math.abs(C*Math.cos(f)+i*Math.sin(f));if(n=="center"){l+=(m-v)/2}else{if(n=="right"){l+=(m-v)}}if(g=="center"){k=k+(u-d)/2}else{if(g=="bottom"){k=k+u-d}}if(z<0){k+=d}l+=v;l=a.jqx._rup(l);k=a.jqx._rup(k);var t=this.shape("g",{transform:"translate("+l+","+k+")"});var c=this.shape("g",{transform:"rotate("+z+")"});t.appendChild(c);c.appendChild(p);j.appendChild(t);this.endGroup();return j==this.canvas?t:j},line:function(d,f,c,e,g){var b=this.shape("line",{x1:d,y1:f,x2:c,y2:e});this.setAttrs(b,g)},path:function(c,d){var b=this.shape("path");b.setAttribute("d",c);if(d){this.setAttrs(b,d)}return b},rect:function(b,g,c,e,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);e=a.jqx._rup(e);var d=this.shape("rect",{x:b,y:g,width:c,height:e});if(f){this.setAttrs(d,f)}return d},circle:function(b,d,c){return this.shape("circle",{cx:b,cy:d,r:c})},pieslice:function(g,f,k,t,v,b,q){if(!k){k=1}var i=Math.abs(t-v);var m=i>180?1:0;if(i>360){t=0;v=360}var n=t*Math.PI*2/360;var e=v*Math.PI*2/360;if(b!=0){var h=i/2+t;var u=h*Math.PI*2/360;offsetX=b*Math.cos(u);offsetY=b*Math.sin(u);g+=offsetX;f-=offsetY}var p=g+k*Math.cos(n);var o=g+k*Math.cos(e);var d=f-k*Math.sin(n);var c=f-k*Math.sin(e);var l="M "+o+","+c;l+="  "+o+","+c+" a"+k+","+k;l+=" 0 "+m+",1 "+(p-o)+","+(d-c);l+=" L"+g+","+f+" Z";var j=this.shape("path");j.setAttribute("d",l);if(q){this.setAttrs(j,q)}return j},setAttrs:function(b,d){if(!b||!d){return}for(var c in d){b.setAttribute(c,d[c])}},setAttr:function(c,b,d){if(!c){return}c.setAttribute(b,d)},getAttr:function(c,b){return c.getAttribute(b)},_gradients:{},_toLinearGradient:function(e,g,h){var c="grd"+e.replace("#","")+(g?"v":"h");var b="url(#"+c+")";if(this._gradients[b]){return b}var d=document.createElementNS(this._svgns,"linearGradient");this.setAttrs(d,{x1:"0%",y1:"0%",x2:g?"0%":"100%",y2:g?"100%":"0%",id:c});for(var f in h){var j=document.createElementNS(this._svgns,"stop");var i="stop-color:"+a.jqx._adjustColor(e,h[f][1]);this.setAttrs(j,{offset:h[f][0]+"%",style:i});d.appendChild(j)}this._defs.appendChild(d);this._gradients[b]=true;return b},anim:function(c,b,d,h,g,f){var e=document.createElementNS("http://www.w3.org/2000/svg","animate");if(!e.beginElement){this.setAttr(c,b,g);return}e.setAttributeNS(null,"attributeName",b);e.setAttributeNS(null,"attributeType",d);e.setAttributeNS(null,"begin","indefinite");e.setAttributeNS(null,"from",h);e.setAttributeNS(null,"to",g);e.setAttributeNS(null,"dur",f);e.setAttributeNS(null,"fill","freeze");c.appendChild(e);e.beginElement()}};a.jqx.vmlRenderer=function(){};a.jqx.vmlRenderer.prototype={_vmlns:"urn:schemas-microsoft-com:vml",init:function(d){var c="<div class='chartContainer' style=\"position:relative;overflow:hidden;\"><div>";d.append(c);this.host=d;var b=d.find(".chartContainer");b[0].style.width=d.width()+"px";b[0].style.height=d.height()+"px";document.namespaces.add("v",this._vmlns);document.createStyleSheet().cssText="v\\:* { behavior: url(#default#VML); }";this.canvas=b[0];this._width=Math.max(a.jqx._rup(b.width()),0);this._height=Math.max(a.jqx._rup(b.height()),0);b[0].style.width=this._width+2;b[0].style.height=this._height+2;this._id=new Date().getTime();this.clear();return true},getRect:function(){return{x:0,y:0,width:this._width,height:this._height}},getContainer:function(){var b=this.host.find(".chartContainer");return b},clear:function(){while(this.canvas.childElementCount>0){this.canvas.removeChild(this.canvas.firstElementChild)}this._gradients={}},removeElement:function(b){if(b!=null){b.parentNode.removeChild(b)}},_openGroups:[],beginGroup:function(){var b=this._activeParent();var c=document.createElement("v:group");c.style.position="absolute";c.coordorigin="0,0";c.coordsize=this._width+","+this._height;c.style.left=0;c.style.top=0;c.style.width=this._width;c.style.height=this._height;b.appendChild(c);this._openGroups.push(c);return c},endGroup:function(){if(this._openGroups.length==0){return}this._openGroups.pop()},_activeParent:function(){return this._openGroups.length==0?this.canvas:this._openGroups[this._openGroups.length-1]},createClipRect:function(b){var c=document.createElement("div");c.style.height=b.height+"px";c.style.width=b.width+"px";c.style.position="absolute";c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.overflow="hidden";this._clipId=this._clipId||0;c.id="cl"+this._id+"_"+(++this._clipId).toString();this._activeParent().appendChild(c);return c},setClip:function(c,b){b.appendChild(c)},_clipId:0,addHandler:function(b,d,c){a(b).bind(d,c)},measureText:function(m,c,d){var e=document.createElement("v:textbox");var k=document.createElement("span");k.appendChild(document.createTextNode(m));e.appendChild(k);if(d["class"]){k.className=d["class"]}var l=this._activeParent();l.appendChild(e);var g=a(e);var h=a.jqx._rup(g.width());var b=a.jqx._rup(g.height());l.removeChild(e);if(b==0&&a.browser.msie&&a.browser.version==8){var n=g.css("font-size");if(n){b=parseInt(n);if(isNaN(b)){b=0}}}if(c==0){return{width:h,height:b}}var i=c*Math.PI*2/360;var f=Math.abs(h*Math.sin(i)-b*Math.cos(i));var j=Math.abs(h*Math.cos(i)+b*Math.sin(i));return{width:a.jqx._rup(j),height:a.jqx._rup(f)}},text:function(o,l,k,r,p,A,C,B,n,g){var s=C.stroke||"black";var q;if(!n){n="center"}if(!g){g="center"}B=false;if(B){q=this.beginGroup();var e=this.createClipRect({x:a.jqx._rup(l),y:a.jqx._rup(k),width:a.jqx._rup(r),height:a.jqx._rup(p)});this.setClip(q,e)}var b=document.createElement("v:textbox");b.style.position="absolute";var t=document.createElement("span");t.appendChild(document.createTextNode(o));if(C["class"]){t.className=C["class"]}b.appendChild(t);var j=this._activeParent();j.appendChild(b);var D=a(b).width();var i=a(b).height();j.removeChild(b);var m=r||0;var v=p||0;if(!A||A==0){if(n=="center"){l+=(m-D)/2}else{if(n=="right"){l+=(m-D)}}if(g=="center"){k=k+(v-i)/2}else{if(g=="bottom"){k=k+v-i}}if(!r){r=D}if(!p){p=i}if(!q){b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.width=a.jqx._rup(r);b.style.height=a.jqx._rup(p)}j.appendChild(b);if(q){this.endGroup();return j}return b}var f=A*Math.PI*2/360;var d=Math.abs(D*Math.sin(f)-i*Math.cos(f));var z=Math.abs(D*Math.cos(f)+i*Math.sin(f));if(n=="center"){l+=(m-z)/2}else{if(n=="right"){l+=(m-z)}}if(g=="center"){k=k+(v-d)/2}else{if(g=="bottom"){k=k+v-d}}l=a.jqx._rup(l);k=a.jqx._rup(k);var u=a.jqx._rup(l+z);var c=a.jqx._rup(k+d);if(Math.abs(A)==90){j.appendChild(b);b.style.left=a.jqx._rup(l);b.style.top=a.jqx._rup(k);b.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";if(q){this.endGroup();return j}return b}return line},shape:function(b,e){var c=document.createElement("v:"+b);if(!c){return undefined}for(var d in e){c.setAttribute(d,e[d])}this._activeParent().appendChild(c);return c},line:function(e,g,d,f,h){var b="M "+e+","+g+" L "+d+","+f+" X E";var c=this.path(b);this.setAttrs(c,h);return c},path:function(c,e){var b=document.createElement("v:shape");b.style.position="absolute";b.coordsize=this._width+" "+this._height;b.coordorigin="0 0";b.style.width=parseInt(this._width);b.style.height=parseInt(this._height);b.style.left=0;b.style.top=0;var d=document.createElement("v:path");d.v=c;b.appendChild(d);this._activeParent().appendChild(b);if(e){this.setAttrs(b,e)}return b},rect:function(b,g,c,d,f){b=a.jqx._ptrnd(b);g=a.jqx._ptrnd(g);c=a.jqx._rup(c);d=a.jqx._rup(d);var e=this.shape("rect",f);e.style.position="absolute";e.style.left=b;e.style.top=g;e.style.width=c;e.style.height=d;e.strokeweight=0;return e},circle:function(b,e,d){var c=this.shape("oval");b=a.jqx._ptrnd(b-d);e=a.jqx._ptrnd(e-d);d=a.jqx._rup(d);c.style.position="absolute";c.style.left=b;c.style.top=e;c.style.width=d*2;c.style.height=d*2;return c},pieslice:function(i,h,l,u,w,c,s){if(!l){l=1}var k=Math.abs(u-w);var n=k>180?1:0;if(k>360){u=0;w=360}var o=u*Math.PI*2/360;var g=w*Math.PI*2/360;if(c!=0){var j=k/2+u;var v=j*Math.PI*2/360;offsetX=c*Math.cos(v);offsetY=c*Math.sin(v);i+=offsetX;h-=offsetY}var q=a.jqx._ptrnd(i+l*Math.cos(o));var p=a.jqx._ptrnd(i+l*Math.cos(g));var e=a.jqx._ptrnd(h-l*Math.sin(o));var d=a.jqx._ptrnd(h-l*Math.sin(g));i=a.jqx._ptrnd(i);h=a.jqx._ptrnd(h);l=a.jqx._ptrnd(l);var f=Math.round(u*65535);var t=Math.round((w-u)*65536);var m="M"+i+" "+h;m+=" AE "+i+" "+h+" "+l+" "+l+" "+f+" "+t;m+=" X E";var b=this.path(m,s);if(s){this.setAttrs(b,s)}return b},_keymap:[{svg:"fill",vml:"fillcolor"},{svg:"stroke",vml:"strokecolor"},{svg:"stroke-width",vml:"strokeweight"},{svg:"fill-opacity",vml:"fillopacity"},{svg:"opacity",vml:"opacity"},{svg:"cx",vml:"style.left"},{svg:"cy",vml:"style.top"}],_translateParam:function(b){for(var c in this._keymap){if(this._keymap[c].svg==b){return this._keymap[c].vml}}return b},setAttrs:function(c,e){if(!c||!e){return}for(var d in e){var b=this._translateParam(d);if(b=="fillcolor"&&e[d].indexOf("grd")!=-1){c.type=e[d]}else{if(b=="opacity"||b=="fillopacity"){if(c.fill){c.fill.opacity=e[d]}}else{if(b.indexOf("style.")==-1){c[b]=e[d]}else{c.style[b.replace("style.","")]=e[d]}}}}},setAttr:function(d,c,e){var b=this._translateParam(c);d[b]=e},getAttr:function(d,c){var b=this._translateParam(c);if(b=="opacity"||b=="fillopacity"){if(d.fill){return d.fill.opacity}else{return 1}}if(b.indexOf("style.")==-1){return d[b]}return d.style[b.replace("style.","")]},_gradients:{},_toLinearGradient:function(g,i,j){var d="grd"+g.replace("#","")+(i?"v":"h");var e="#"+d+"";if(this._gradients[e]){return e}var f=document.createElement("v:fill");f.type="gradient";f.method="linear";f.angle=i?0:90;var c="";for(var h in j){if(h>0){c+=", "}c+=j[h][0]+"% "+a.jqx._adjustColor(g,j[h][1])}f.colors=c;var b=document.createElement("v:shapetype");b.appendChild(f);b.id=d;this.canvas.appendChild(b);return e}}})(jQuery);